steps:
- bash: |
   if [ -f extensions.csproj ]
       then
           dotnet build extensions.csproj --output ./bin
       fi
  displayName: 'Build Extensions'

- task: NodeTool@0
  displayName: 'Use Node 10.14.1'
  inputs:
    versionSpec: 10.14.1

- task: Npm@1
  displayName: 'Install Dependencies'
  inputs:
    workingDir: '$(System.DefaultWorkingDirectory)'
    verbose: false

- task: Npm@1
  displayName: 'Run build Script'
  inputs:
    command: custom
    workingDir: '$(System.DefaultWorkingDirectory)'
    verbose: false
    customCommand: 'run build --if-present'

- task: Npm@1
  displayName: 'npm custom'
  inputs:
    command: custom
    workingDir: '$(System.DefaultWorkingDirectory)'
    verbose: false
    customCommand: 'prune --production'

- task: ArchiveFiles@2
  displayName: 'Archive $(System.DefaultWorkingDirectory)'
  inputs:
    rootFolderOrFile: '$(System.DefaultWorkingDirectory)'
    includeRootFolder: false
    archiveFile: '$(Build.BuildId).zip'

- script: |
   pwd
   ls -l
   
  displayName: 'Command Line Script'

- task: PublishBuildArtifacts@1
  displayName: 'Publish Artifact: drop'
  inputs:
    PathtoPublish: '$(System.DefaultWorkingDirectory)/$(Build.BuildId).zip'
    
steps:
- task: AzureFunctionApp@1
  displayName: 'Azure Function App Deploy: mohasinfunc'
  inputs:
    azureSubscription: 'Pay-As-You-Go (40783f5c-2558-41a9-a5af-97b47669376e)'
    appType: functionAppLinux
    appName: mohasinfunc
    package: '$(System.DefaultWorkingDirectory)/_mohasinpathan005-CI (2)/drop/276.zip'
    runtimeStack: 'NODE|10'
